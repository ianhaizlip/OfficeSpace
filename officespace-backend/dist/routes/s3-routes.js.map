{"version":3,"sources":["../../src/routes/s3-routes.js"],"names":["AWS","require","s3","S3","module","exports","file","get","req","res","listObjects","bucket","params","err","data","status","json","getObject","body","post","putObject","delete","deleteObject","createBucket","deleteBucket"],"mappings":";;AAAA;AACA,IAAMA,MAAMC,QAAQ,SAAR,CAAZ;AACA,IAAMC,KAAK,IAAIF,IAAIG,EAAR,EAAX;;AAEAC,OAAOC,OAAP,GAAiB,UAACC,IAAD,EAAU;AACvB;AACAA,SAAKC,GAAL,CAAS,mBAAT,EAA8B,UAACC,GAAD,EAAMC,GAAN,EAAc;AACxC;AACA;AACA;AACA;AACAP,WAAGQ,WAAH,CAAe,EAACC,QAAQH,IAAII,MAAJ,CAAWD,MAApB,EAAf,EAA4C,UAACE,GAAD,EAAMC,IAAN,EAAa;AACrD,gBAAGD,GAAH,EAAO;AACHJ,oBAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAArB;AACH,aAFD,MAII;AACAJ,oBAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,IAArB;AACH;AACJ,SARD;AASH,KAdD;AAeAR,SAAKC,GAAL,CAAS,eAAT,EAA0B,UAACC,GAAD,EAAMC,GAAN,EAAc;AACpC;AACA;AACA;AACA;AACA;AACAP,WAAGe,SAAH,CAAaT,IAAIU,IAAjB,EAAuB,UAACL,GAAD,EAAMC,IAAN,EAAa;AAChC,gBAAGD,GAAH,EAAO;AACHJ,oBAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAArB;AACH,aAFD,MAII;AACAJ,oBAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,IAArB;AACH;AACJ,SARD;AASH,KAfD;AAgBAR,SAAKa,IAAL,CAAU,UAAV,EAAsB,UAACX,GAAD,EAAMC,GAAN,EAAc;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAP,WAAGkB,SAAH,CAAaZ,IAAIU,IAAjB,EAAuB,UAACL,GAAD,EAAMC,IAAN,EAAa;AAChC,gBAAGD,GAAH,EAAO;AACHJ,oBAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAArB;AACH,aAFD,MAII;AACAJ,oBAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,IAArB;AACH;AACJ,SARD;AASH,KApBD;;AAsBAR,SAAKe,MAAL,CAAY,UAAZ,EAAwB,UAACb,GAAD,EAAMC,GAAN,EAAc;AAClC;AACA;AACA;AACA;AACA;AACAP,WAAGoB,YAAH,CAAgBd,IAAIU,IAApB,EAA0B,UAACL,GAAD,EAAMC,IAAN,EAAc;AACpC,gBAAGD,GAAH,EAAO;AACHJ,oBAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAArB;AACH,aAFD,MAII;AACAJ,oBAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,IAArB;AACH;AACJ,SARD;AASH,KAfD;;AAiBA;AACAR,SAAKa,IAAL,CAAU,YAAV,EAAwB,UAACX,GAAD,EAAMC,GAAN,EAAc;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACAP,WAAGqB,YAAH,CAAgBf,IAAIU,IAApB,EAA0B,UAACL,GAAD,EAAMC,IAAN,EAAc;AACpC,gBAAGD,GAAH,EAAO;AACHJ,oBAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAArB;AACH,aAFD,MAII;AACAJ,oBAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,IAArB;AACH;AACJ,SARD;AASH,KAjBD;AAkBAR,SAAKe,MAAL,CAAY,YAAZ,EAA0B,UAACb,GAAD,EAAMC,GAAN,EAAc;AACpC;AACA;AACA;AACA;AACAP,WAAGsB,YAAH,CAAgBhB,IAAIU,IAApB,EAA0B,UAACL,GAAD,EAAMC,IAAN,EAAc;AACpC,gBAAGD,GAAH,EAAO;AACHJ,oBAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAArB;AACH,aAFD,MAII;AACAJ,oBAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,IAArB;AACH;AACJ,SARD;AASH,KAdD;AAeH,CA1GD","file":"s3-routes.js","sourcesContent":["// const User = require('../models/s3');\nconst AWS = require('aws-sdk');\nconst s3 = new AWS.S3();\n\nmodule.exports = (file) => {\n    // FILE MANIPULATION\n    file.get('/s3/files/:bucket', (req, res) => {\n        // GET ALL FILES FROM BUCKET\n        // req.body = {\n        //     Bucket: \"examplebucket\"\n        // };\n        s3.listObjects({bucket: req.params.bucket}, (err, data)=>{\n            if(err){\n                res.status(500).json(err);\n            }\n\n            else{\n                res.status(201).json(data);\n            }\n        });\n    });\n    file.get('/s3/file/:key', (req, res) => {\n        // GET ONE FILE\n        // req.body = {\n        //     Bucket: \"examplebucket\",\n        //     Key: \"objectkey.jpg\"\n        // };\n        s3.getObject(req.body, (err, data)=>{\n            if(err){\n                res.status(500).json(err);\n            }\n\n            else{\n                res.status(201).json(data);\n            }\n        })\n    });\n    file.post('/s3/file', (req, res) => {\n        // UPLOAD ONE FILE\n        // req.body = {\n        //         Body: <Binary String>,\n        //         Bucket: \"examplebucket\",\n        //         Key: \"exampleobject\",\n        //         Metadata: {\n        //             \"metadata1\": \"value1\",\n        //             \"metadata2\": \"value2\"\n        //     }\n        // };\n        s3.putObject(req.body, (err, data)=>{\n            if(err){\n                res.status(500).json(err);\n            }\n\n            else{\n                res.status(201).json(data);\n            }\n        });\n    });\n\n    file.delete('/s3/file', (req, res) => {\n        // DELETE ONE FILE\n        // req.body = {\n        //   Bucket: \"examplebucket\",\n        //   Key: \"objectkey.jpg\"\n        //  };\n        s3.deleteObject(req.body, (err, data) =>{\n            if(err){\n                res.status(500).json(err);\n            }\n\n            else{\n                res.status(201).json(data);\n            }\n        });\n    });\n\n    // BUCKET MANIPULATION\n    file.post('/s3/bucket', (req, res) => {\n        // CREATE BUCKET\n        // req.body = {\n        //     Bucket: \"examplebucket\",\n        //     ACL: public-read-write,\n        //     CreateBucketConfiguration: {\n        //         LocationConstraint: \"eu-west-1\"\n        //     }\n        s3.createBucket(req.body, (err, data) =>{\n            if(err){\n                res.status(500).json(err);\n            }\n\n            else{\n                res.status(201).json(data);\n            }\n        });\n    });\n    file.delete('/s3/bucket', (req, res) => {\n        // delete bucket\n        // req.body = {\n        //     Bucket: \"examplebucket\",\n        // };\n        s3.deleteBucket(req.body, (err, data) =>{\n            if(err){\n                res.status(500).json(err);\n            }\n\n            else{\n                res.status(201).json(data);\n            }\n        });\n    });\n};"]}